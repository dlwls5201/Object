# 설계 품질과 트레이드오프

- 책임 주도 설계라는 이름에서 알 수 있는 것처럼 역할, 책임, 협력 중에서 가장 중요한 것은 책임이다.
- 객체지향 설계란 올바른 객체에게 올바른 책임을 할당하면서 낮은 결합도와 높은 응집도를 가진 구조를 창조하는 활동이다.
- 책임은 객체의 상태에서 행동으로, 나아가 객체와 객체 사이의 상호작용으로 설계 중심을 이동시키고, 결합도가 낮고 응집도가 높으며 구현을 효과적으로 캡술화하는 객체들을 창조할 수 있는 기반을 제공한다.

## 01 데이터 중심의 영화 예매 시스템

- 객체지향 설계에서는 두 가지 방법을 이용해 시스템을 객체로 분할할 수 있다. 첫 번째 방법은 상태를 분할의 중심축으로 삼는 방법이고, 두 번째 방법은 책임을 분할의 중심축으로 삼는 방법이다.
- 객체의 상태는 구현에 속한다.
- 객체의 책임은 인터페이스에 속한다.

### 데이터를 준비하자

데이터 중심의 설계란 객체 내무에 저장되는 데이터를 기반으로 시스템을 분할하는 방법이다.

## 02 설계 트레이드오프

### 캡슐화

상태와 행동을 하나의 객체 안에 모으는 이유는 객체의 내부 구현을 외부로부터 감추기 위해서다. 
객체지향이 강력한 이유는 한 곳에서 일어난 변경이 전체 시스템에 영향을 끼치지 않도록 파급효과를 적절하게 조절할 수 있는 장치를 제공하기 때문이다.

**캡슐화란 변경 가능성이 높은 부분을 객체 내부로 숨기는 추상화 기법이다.**

### 응집도와 결합도

- 응집도는 모듈에 포함된 내부 요속들이 연관돼 있는 정도를 나타낸다.
- 결합도는 의존성의 정도를 나타내며 다른 모듈에 대해 얼마나 많은 지식을 갖고 있는지를 타나내는 척도다.
- 일반적으로 좋은 설계란 높은 응집도와 낮은 결합도를 가진 모듈로 구성된 설계를 의미한다.
- 좋은 설계란 오늘의 기능을 수행하면서 내일의 변경을 수용할 수 있는 설계다.

## 03 데이터 중심의 영화 예매 시스템의 문제점

데이터 중심의 설계가 가진 대표저인 문제점

1. 캠슐화 위반
2. 높은 결합도
3. 낮은 응집도

## 04 자율적인 객체를 향해

### 캡슐화를 지켜라

객체는 자신이 어떤 데이터를 가지고 있는지를 내부에 캡슐화하고 외부에 공개해서는 안된다. 객체는 스스로의 상태를 책임져야 하며 외부에서는 인터페이스에 정의된 메서드를 통해서만 상태에 접근할 수 있어야 한다.

### 스스로 자신의 데이터를 책임지는 객체

## 05 하지만 여전히 부족하다

### 캡슐화 위반

> DiscountCondition 왜 캡슐화 위반인가
> Movie 왜 캡슐화 위반인가

### 높은 결합도

### 낮은 응집도

## 06 대이터 중심 설계의 문제점

데이터 중심의 설계가 변경에 취약한 이유는 두 가지다.

1. 데이터 중심의 설계는 본질적으로 너무 이른 시기에 데이터에 관해 결정하도록 강요한다.
2. 데이터 중심의 설계에서는 협력이라는 문맥을 고려하지 않고 객체를 고립시킨 채 오퍼레이션을 결정한다.

### 데이터 중심 설계는 객체의 행동보다는 상태에 초점을 맞춘다.

### 데이터 중심 설계는 객체를 고립시킨 채 오퍼레이션을 정의하도록 만든다.


